<!DOCTYPE html>
<html>

<head>
    <title>Edit.markdown</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
 
    <link rel="stylesheet" href="css/preview.css" />
     <script>
        const $= require('jquery');
        const {clipboard} = require('electron')

        window.addEventListener('storage', function(e) {  
             
            var preview = localStorage.preview ; 
            document.getElementById('content').innerHTML=preview||"";
          
            let select_txt = localStorage.select_txt;
           
            if(select_txt){
                // console.log(select_txt);
                document.location.href='#'+select_txt
            }

  
        });
        $(function  () {
            // body...
            console.log('doc is ready ');
            var preview = localStorage.preview ; 
            $("body").keypress(function(e) {
            /* Act on the event */
            console.log(e.ctrlKey ,e.which );
            if(e.ctrlKey && e.which ==5&&preview){
                console.log("copy preview to clicpbord!");
                
                clipboard.writeText(preview)
                alert('成功复制到剪切板。')
            }
            
        });
        })
       
        
     </script>
           
</head>

<body  >
    <div  >
         
            <h2>预览窗口[CTRL+E：快速复制]</h2> 
    </div>
    <div id="content" class='markdown-body'></div>
    <script>
        var preview = localStorage.preview ; 
        document.getElementById('content').innerHTML=preview||"";

    </script>
</body>

</html>
